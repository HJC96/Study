# 계층형 아키텍처
- 서브 시스템을 계층으로 구조화 하는 아키텍처 스타일
- 계층은 사용 관계로 연결된다
- 사용 관계는 일반적으로 단방향이어야 한다는 핵심 제약이 있다
  - 상위 계층이 하위 계층의 서비스를 사용하는 하향식 흐름을 가진다
- 각 계층이 하위 계층의 내부 작동 방식을 알지 못하고 제한된 인터페이스만 사용하도록 한다(계층 격리)
  - 어떤 레이어의 변경이 다른 레이어의 컴포넌트에게 가능한 영향을 주지 않도록 해야 한다

# 3계층 아키텍처
- UI -> Domain -> Data
- Presentation -> Business Logic -> Infra
- Presentation -> Domain(Transaction Script) -> Infra
- Presentation -> Application Service -> Domain(Transaction Script) -> Infra
- 완화된 계충형 아키텍처: 자신의 바로 아래 말고 한단계 건너뛰어서 의존 가능하다

# 헥사고날 아키텍처
- 2005년 앨리스터 코번이 제안한 아키텍처
- 계층형 아키텍처의 단방향 비대칭 구조가 아닌 대칭형 아키텍처
- 위 아래, 좌 우가 아닌 애플리케이의 내부와 외부 세계라는 대칭 구조를 가진다
- 아키텍처의 대칭성을 가진 구조를, 그리기 쉬운 대표적인 도형인 육각형으로 설명
- 육각형, 6개의 면을 가졌다는 게 특별한 의미를 가지는 건 아니다

# 헥사곤의 내부
- 쉽게 변하지 않는, 중요한 도메인 로직을 담은 코어 애플리케이션
  - 도메인 로직을 가진 트랜잭션 스크립트
  - 애플리케이션 서비스와 도메인 모델 패턴을 따라서 만든 도메인

# 헥사곤의 외부
- 헥사곤과 상호작용하는 모든것 - 액터
- 사용자, 브라우저, CLI명령, 기계, 다른 시스템
- 운영환경, DB, 메시징 시스템, 메일 시스템, 원격 서비스
- 테스트


# 헥사고날 아키텍처의 특징과 혜택
- 테스팅! 운영 시스템에 연결되지 않고 애플리케이션 테스트
- 애플리케이션과 상호작용하는 액터가 바뀌더라도 다시 빌드하지 않고 테스트
- UI 디테일이나 기술 정보가 도메인 로직 안으로 노출되지 않도록 보호한다 반대도 마찬가지.
- 컴포넌트를 각각 개발하고 연결하는 방식으로 큰 시스템을 분리할 수 있다
- 시간이 지나면서 외부 연결을 다른 것으로 변경할 수 있다
- 기술 요소를 제거했기 때문에 도메인 설계에 집중할 수 있다

# 헥사곤을 부르는 여러가지 이름
- 헥사곤
- 애플리케이션
- 앱(App)
- 코어 시스템
- SuD(System under Devlopment)
- SuT(System under Test)

# 액터와 애플리케이션의 상호작용은 어떻게

# 포트
- 애플리케이션이 외부 세계와 의도를 가지고 상호작용 하는 아이디어를 캡처한 것
- 단순히 데이터를 주고받는 것이 아니라, 명확한 목적과 방향을 가지고 외부와 연결된다.
- 애플리케이션이 정의한 인터페이스로 만들어진다

# 인터페이스
- Lollipop: Provided Interface
- Socket: Required Interface

# 어댑터
- 애플리케이션의 포트를 액터가 직접 연결할 수 없다면 인터페이스의 변환을 위한 어댑터 도입
- 브라우저를 통해서 애플리케이션의 회원 가입 포트의 기능 제공 인터페이스를 사용하려면?
  - 회원 가입 기능 제공 인터페이스를 사용하는 웹 컨트롤러 어댑터를 만든다
- 애플리케이션이 가진 회원 정보 저장 포트의 기능 요구 인터페이스로 DB와 직접 연결할 수 없다면?
  - 기능 요구 인터페이스를 구현한 리포지터리 어댑터를 만든다

...

