# CSRF (Cross-Site Request Forgery) 공격

## 정의
CSRF 공격은 사용자가 자신의 의지와는 무관하게, 인증된 상태에서 악의적인 요청을 하도록 만드는 웹 보안 취약점

## 작동 원리
1. **사용자 인증**: 사용자가 웹 사이트에 로그인하여 인증된 상태가 된다.
2. **악의적인 요청**: 공격자는 사용자가 인증된 웹 사이트에 대해 악의적인 행동을 요청하는 링크나 버튼을 생성.
3. **사용자의 무의식적 행동**: 사용자가 이 링크나 버튼을 클릭하면, 브라우저는 이미 인증된 사용자의 세션을 사용하여 공격자의 요청을 전송.
4. **서버의 응답**: 서버는 요청을 정상적인 사용자의 행동으로 인식하고 처리.

## 예방 방법
- **JWT (JSON Web Tokens)**: JWT를 사용하여 사용자 세션을 관리함으로써 CSRF 공격을 방지할 수 있다. JWT는 클라이언트에 저장되며, 서버는 클라이언트로부터 받은 토큰을 검증하여 요청이 유효한지 확인한다. 이 방식은 전통적인 세션 기반 인증과 달리 서버가 사용자의 세션 상태를 저장할 필요가 없어 CSRF 공격에 덜 취약하다.
- **토큰 사용**: 각 폼에 고유한 CSRF 토큰을 포함시켜 서버에서 이를 검증.
- **SameSite 쿠키 속성 사용**: 쿠키에 `SameSite` 속성을 설정하여, 다른 사이트에서의 요청에 대해서는 쿠키를 전송하지 않도록 함.
- **사용자 입력 검증**: 사용자의 요청이 예상된 동작인지 서버 측에서 검증.
- **Referer 검증**: HTTP 헤더의 `Referer` 값을 검증하여 요청이 신뢰할 수 있는 출처에서 발생했는지 확인.

## 공격 사례
- **사이트 간 요청**: 예를 들어, 사용자가 인터넷 뱅킹에 로그인한 상태에서 공격자가 준비한 "이체" 링크를 클릭하면, 사용자는 자신도 모르게 이체를 수행할 수 있다.

## 결론
CSRF는 사용자의 인증 정보를 악용하는 공격으로, 웹 애플리케이션에서 적절한 보안 조치를 취하여 예방할 필요가 있다.

