
# 회원 기능 구현(로그인/로그아웃)
<img width="772" alt="image" src="https://github.com/HJC96/WebDev/assets/87226129/d7e0988f-9807-4920-af47-79dda95a980a">

# 배경지식
## 인증과 인가

인증(authentication)→ 로그인

인가(authorization) → 인증 받은 사용자가 서비스의 여러 기능을 사용하고자 할때 → JWT가 가깝다..

## 회원 인증 기능

1. 세션 방식
    1. 입장권에 정보가 거의 없다.
    2. 유저가 번호를 제시한다.
    3. 서버가 메모리나 디비에 만들어놓은 번호를 비교한다.
2. 토큰 방식
    1. 입장권만 까봄
    2. 회원이 많아질수록 서버의 부담이 덜해진다.
# JWT
## 형태

---

- 헤더
    - 알고리즘 none으로 하면 안됨
    - HS256 사용
- 페이로드
- verify signature
    - 시크릿키
        - 브루트 포스 어택에 의해 뚫릴 수 있다.

## 각 토큰의 역할

---

1. ACCESS 토큰 → 접근 권한검사
    1. 탈취당하면 문제! 시간을 짧게 설정
2. Refresh Token을 함께 준다.
    1. 이를 통해 User가 AccessToken을 재발급 받을 수 있도록 한다.
3. Refresh Token이 탈취당하면?
    1. 비밀키를 설정하면 된다.
    2. 하지만, 비밀키도 탈취당할 수 있기 때문에 근본적인 해결책이 될수는 없다

## **JWT 입장권을 탈취당하면?**

---

→ 개발자들이 굳이 깊게 생각할 필요는 없다.

→ 구조상 입장권을 회수하는것은 불가능하다.

→ 방법: 입장권 블랙리스트를 만든다.

→ 유효기간을 만든다 → 이때 refresh Token을 사용

리프레시 토큰도 탈취당할 수 있기에 Refresh token rotation이 필요.
# Spring Security
